
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title></title>
		<link rel="stylesheet" href="../css/jquery.mobile-1.1.0.min.css" />
		<link rel="stylesheet" href="../css/estilo.css" />
		<!-- 
		<script src="http://debug.phonegap.com/target/target-script-min.js#c893bad68927b457dbed39460e6afd62"></script>
		Direccion para debug
		http://debug.phonegap.com/client/#c893bad68927b457dbed39460e6afd62
		-->
		<script src="../js/cordova-1.8.0.js" type="text/javascript" ></script>
		<script src="../js/jquery.min.js" type="text/javascript"></script>
		<script src="../js/aaa.js" type="text/javascript"></script>
		<script src="../js/jquery.mobile-1.1.0.min.js" type="text/javascript"></script>
		<script src="../js/jqm-spinbox.min.js" type="text/javascript"></script>
		<!--
		<script src="../js/bluetooth.js" type="text/javascript"></script>
		<script src="../js/ftpclient.js" type="text/javascript"></script>
        <script src="../js/wifiprinter.js" type="text/javascript"></script>
        -->
        <script src="../js/moment.min.js" type="text/javascript"></script>
        
        <script src="../js/impresion.js" type="text/javascript"></script>
		<script src="../js/autoventa.js" type="text/javascript"></script>
		<script src="../js/db_Smart_Sales.js" type="text/javascript"></script>

		<script type="text/javascript" charset="utf-8">

    		window.onload = function() {
			 	document.addEventListener("deviceready", onDeviceReady, false);
			};

			//document.addEventListener("deviceready", onDeviceReady, false);
			var cargoImpresora = false;
		
			//Define el ambiente a utilizar...
            var esAmbienteProduccion=false;
            
            //ruta a servidores de Piloto, conexiones internas...
            var servidorWS_RedInterna_Piloto='http://190.212.139.237:90/DIST/OperacionesFDC';
            var servidorFTP_RedInterna_Piloto='isaws05.nsel-clnsa.com.ni';
            var usuarioFTP_RedInterna_Piloto='ISAWS05\\FTP_Distribucion';
            var passFTP_RedInterna_Piloto='f79.d1$7R1BU';
            
           //ruta a servidores de Piloto, conexiones externas...
            var servidorWS_Internet_Piloto='http://190.212.139.237:90/DIST/OperacionesFDC';
            var servidorFTP_Internet_Piloto='190.212.139.237';
            var usuarioFTP_Internet_Piloto='ISAWS05\\FTP_Distribucion';
            var passFTP_Internet_Piloto='f79.d1$7R1BU';
            
           //ruta a servidores de Produccion, conexiones internas...
            var servidorWS_RedInterna_Produccion='https://192.168.134.32:92/DIST/OperacionesFDC';
            var servidorFTP_RedInterna_Produccion='piloto.nsel-clnsa.com.ni';
            var usuarioFTP_RedInterna_Produccion='ISAWS02\\FTP_Distribucion';
            var passFTP_RedInterna_Produccion='iW8qYFeK';
            
           //ruta a servidores de Produccion, conexiones externas...
            var servidorWS_Internet_Produccion='https://190.212.139.230/DIST/OperacionesFDC';
            var servidorFTP_Internet_Produccion='190.212.139.230';
            var usuarioFTP_Internet_Produccion='ISAWS02\\FTP_Distribucion';
            var passFTP_Internet_Produccion='iW8qYFeK';
            
			//Guarda el nombre de impresora conectada...
			var nombreImpresoraConectada='';

			/*
			//Define el nombre de impresora conectada...
			function definirNombreImpresoraConectada(){
				navigator.notification.activityStart("Buscando impresora...", "Por favor espere");
				//Itera en dispositivos Bluetooth...
				window.plugins.Bluetooth.discoverDevices(
						function (devices) {
							$.each(devices, function (indice, dispositivo) {
								
								if(dirImpresora==dispositivo.address){ 
									nombreImpresoraConectada=dispositivo.name;
									alert('Impresora en uso '+nombreImpresoraConectada);
									cargoImpresora = true;
									navigator.notification.activityStop();
									return false;
								}
							});
							if(nombreImpresoraConectada==''){
								alert('No se encontro impresora');
								navigator.notification.activityStop();
							}
						},
						function (error) {
							alert("Fallo el proceso de escaneo de los dispositivos con Bluetooth.");
						}
					);
			}*/

            
            //Define lista de errores...
            var logErrores=[];
            
            //Define cantidad de errores...
            var errorFacturacion=[];

			
			//Muestra impresora conectada...
			function muestraImpresoraConectada(){
				$("#impresoraConectada").html("Impresora actual: "+nombreImpresoraConectada+". MAC: "+dirImpresora);
			}
			
			
			
			
			
			//Arma lista de dispositivos Bluetooth...
			function listarImpresoras(){
				
				$("#selectImpresora").html("");
				navigator.notification.activityStart("Buscando impresoras...", "Por favor espere"); 
				window.plugins.Bluetooth.discoverDevices(
						function (devices) {
							var listaImpresoras="";
							$.each(devices, function (indice, dispositivo) {
								if(dispositivo.name=="APEX3" || dispositivo.name=="SPP-R300"){
									listaImpresoras += "<option value='"+ dispositivo.address +"_"+dispositivo.name+ "'>"+ dispositivo.name+" ("+dispositivo.address+ ")</option>";
								}
							});
							navigator.notification.activityStop();
							$("#selectImpresora").html(listaImpresoras);
						    $('#selectImpresora').selectmenu('enable');
							$('#selectImpresora').selectmenu('refresh');
							
							
						},
						function (error) {
							alert("Fallo el proceso de escaneo de los dispositivos con Bluetooth.");
						}
					);
			}
			
            //Define lista de errores...
            var logErrores=[];
            
            function HayErrores(){
            	//Imprime errores...
            	alert(logErrores);
            }
            
          
        	//Imprime facturas desde archivo...
			function insertarFacturaDesdeArchivo(){

				var i;
				
				var facturaCargaMasiva=[];
				var factDetalle=[];
				var imprEncabezadoFactura=[];
				
				var codigoFactura;
				var factDatosCliente;
				var fecha;
				var hora;
				var factNumPedido="";
				var factSubtotal=0;
				var factIva=0;
				var FCLiquido="";
				//var numfactura="";
				
				  
				facturaCargaMasiva=getcsv("facturaCargaMasiva.txt");
				codigoFactura=facturaCargaMasiva[0].split("|")[16];
				
				//alert(facturaCargaMasiva[0].split("|")[16]);
				
				//alert(facturaCargaMasiva.length);
				 
				for(i=0;i<facturaCargaMasiva.length;i++){
					
				   	if(codigoFactura==facturaCargaMasiva[i].split("|")[16]){
				   		
				   		clienteenuso=facturaCargaMasiva[i].split("|")[0];
				   		factDatosCliente = buscadatosCliente(clienteenuso);		   		
				   		fecha=facturaCargaMasiva[i].split("|")[17].split(" ")[0];   		
				   		hora=facturaCargaMasiva[i].split("|")[17].split(" ")[1];
				   		factSubtotal+=Number(facturaCargaMasiva[i].split("|")[11]);
				   		factIva+=Number(facturaCargaMasiva[i].split("|")[13]);
				   		factDetalle.push([facturaCargaMasiva[i].split("|")[1],facturaCargaMasiva[i].split("|")[2],0,facturaCargaMasiva[i].split("|")[10],Number(facturaCargaMasiva[i].split("|")[4]).toFixed(4),Number(facturaCargaMasiva[i].split("|")[11]).toFixed(2),null]);
				   		
				   	}
				   	else{
				   		//numfactura=facturaCargaMasiva[i].split("|")[16];
				   		
				   		//Imprime Documento Original...
				   	    imprEncabezadoFactura = ["ORIGINAL", "FACTURA",clienteenuso, factDatosCliente[3],codigoFactura, factDatosCliente[1],ruta, formatofecha(fecha),null, hora,factNumPedido, factDatosCliente[2],formatoDinero(factSubtotal).toString(), formatoDinero(factIva).toString(),formatoDinero(Number(factSubtotal) + Number(factIva)).toString(),null, null, FCLiquido];
			            dataFacturacion(imprEncabezadoFactura, factDetalle, 0);
			            
			            /*
			            //Imprime Copias...
			            for(j=1;j<=2;j++){
			            	//alert("Impresa Factura Original. Imprimir Copia "+j);
			                imprEncabezadoFactura = ["FACTURACOPIA", "FACTURA",clienteenuso, factDatosCliente[3],codigoFactura, factDatosCliente[1],ruta, formatofecha(fecha),null, hora,factNumPedido, factDatosCliente[2],formatoDinero(factSubtotal).toString(), formatoDinero(factIva).toString(),formatoDinero(Number(factSubtotal) + Number(factIva)).toString(),null, null, FCLiquido,j];
				            dataFacturacion(imprEncabezadoFactura, factDetalle, 0);
			            }
			            */
			           	codigoFactura=facturaCargaMasiva[i].split("|")[16];
			            factDetalle=[];
			            imprEncabezadoFactura=[];
			            factSubtotal=0;
			            factIva=0;
				   	}
					
				}
					
			}	
        
            function onDeviceReady() {
            	
            
			//Muestra ambiente en pantalla...
            if(esAmbienteProduccion===false){
            	$('#ambiente').html('Piloto ');
            }
            else{
            	$('#ambiente').html('');
            }

			estacorriendo();
			//Crea la base de datos
            

			db_smart_sales.metodos.crear_db();

			window.setTimeout(function(){
				db_smart_sales.metodos.crear_db();
			},3000)
			
			 //alert('111');
			 //Inserccion masiva...
            //(ID_Cliente INTEGER NOT NULL, SKU TEXT NOT NULL, Descripcion TEXT NOT NULL, Conteo INTEGER, Precio_Unitario DOUBLE, Precio_Envase DOUBLE, Familia TEXT, Exento INTEGER, Linea_Pedido TEXT )
            // db_smart_sales.metodos.automatico();
            //db_smart_sales.metodos.automatico(1,'2','Prueba',2,10,10,'Prueba',10,'Prueba');

			document.addEventListener("backbutton", onBackKeyDown, false);
			
			if(!cargoImpresora){
				 dirImpresora = getcsv("impresora.txt")[0].split("_")[0];
				 nombreImpresoraConectada=getcsv("impresora.txt")[0].split("_")[1];
				 if( typeof dirImpresora === 'undefined')
				 {
				  alert('No hay datos de impresora: MAC!');
				 }else
				 {
				 if( typeof nombreImpresoraConectada==='undefined'){
					 nombreImpresoraConectada='N/D';
					 muestraImpresoraConectada();
				  }else{
					  activarBluetooth();
					  cargoImpresora=true;
				  }	 
			    }
			}
            
			//Se medifica para validar el banco asociado al tipo de pago
			//2016.02.01 por mroque
			//$('#selecBanco').selectmenu('disable');
			$("#tipoAbono").bind("change", function(event, ui) {
				var tipoAbono = $("#tipoAbono").val();
				db_smart_sales.metodos.Obtener_Datos_Tipo_Pago(3,tipoAbono ,function (item) {
        			/*
					if(item.rows.item(0).SELECCIONAR_BANCO == 0){
        				//$('#selecBanco').val(item.rows.item(0).Codigo_Banco)
        				$('#selecBanco').selectmenu('disable');
						$('#selecBanco').selectmenu('refresh');
        			}
        			else{*/
        				$('#selecBanco').selectmenu('enable');
						$('#selecBanco').selectmenu('refresh');
        		//	}
        		})
			});
			 
			
		}

		//Seleccionar BANCO de la minuta de deposita segun la configuracion que tenga la ruta para el tipo de pago 1
		//Agregado por MROQUE el 2016/02/08
        function Minuta_Deposito_Banco(){
            	db_smart_sales.metodos.Obtener_Banco_Deposito(function (item) {
            		if( item.rows.length == 0){
            			alert("La ruta no tiene configurado banco de deposito");
            		}
            		else{
            			var banco_txt= item.rows.item(0).Banco.trim()
						var cadena_espaciada = banco_txt.split("")
						var url="../img/"+ banco_txt +".png"
						if (banco_txt.toUpperCase() =="BAC"){url= "../img/"+ banco_txt +".gif"}

						var html_imagen="<img src='"+ url +"' class=img_banco width='89' height='34'> Minuta "+ banco_txt
						$('#banco_deposito').attr("onclick","imprimeminuta('"+ cadena_espaciada.join(" ") +"')")
						
						
						//imprimeResumenPago
						$('#banco_deposito').html(html_imagen)
            		}
				}, function(error){
					var conf= confirm("Ocurrio un error al obtener el Banco de Desposito. Desea volver a consultar el banco?");
					if(conf){ Minuta_Deposito_Banco() }
				})
            }

		</script>

	</head>
	<body>

		<!-- Menu -->
		<div id="page1" data-role="page" lang="es" data-theme="b">
			<div data-role="header">
				<h6> Menú Principal <div class="encabezado"></div></h6>
			</div>

			<div style="padding: 15px" data-role="content" data-theme="b">
            
                <a href="#page17" class="ui-btn-corner-left" data-icon="arrow-r" 
                data-iconpos="left" data-role="button">Sincronización</a>
				
				<a href="#page5" data-role="button" data-icon="arrow-r"
				data-iconpos="left" id="btnIniciodia">Inicio de día</a>
                
                <a onclick="inventarioAbordo();" data-role="button" data-icon="arrow-r"
				data-iconpos="left">Inventario abordo</a>
                
                <a href="#page7" data-role="button" data-icon="arrow-r"
				data-iconpos="left" id="btnRutaDia">Ruta del día</a>
                
                <a href="#page2" onclick="Minuta_Deposito_Banco()" class="ui-btn-corner-left" data-icon="arrow-r" 
                data-iconpos="left" data-role="button">Finalizar día</a>

				
		    <!--<a href="#ayuda"
				data-role="button">Reimpresion Manual</a>	-->
                <br/>
				<!--<a onClick="reimpresionManual();" data-role="button">Reimpresion Manual</a> -->
				

				<img src="../img/Logo.png" alt="Logo" width="256" height="75"
				style="margin: auto; display: block;">
			</div>

			<a id="imgConfig" onClick="impresoras();" ><img src="../img/printer.png" width="32" height="32"></a>
			
			<br>
			<!-- 
			<a id="ifac" onClick="insertarFacturaDesdeArchivo();">InsertarFAC.</a>
			 -->
			<!--  <a  onClick="HayErrores();" >Errores</a>-->
            
            
		<div data-role="footer" class="footer">
				<h6>Autoventa / Ruta #<span id="numeroderuta"></span><br>               
                	<span id='ambiente'></span>
                	<span class="version">
                	versión A-2016.09.27
                	</span>
                </h6>          
		</div>
		</div>

		<!-- Inicio del dia -->
		<div id="page5" data-role="page" lang="es" data-theme="b" data-add-back-btn="true">
			<div data-role="header">
				<h6>Inicio del día</h6>
			</div>
			<div data-role="content">
				<div data-role="fieldcontain">
					<label for="kinicial">Ingrese Kilometraje:</label>
					<input
					type="number" name="kinicial" id="kinicial" value="" />
				</div>
				<div data-role="controlgroup" data-type="horizontal">
					<a id="botonKilometrajeI" onClick="kInicial();" data-role="button">Guardar</a>
				</div>

			</div>
		</div>

		<!-- Cambio de Dia -->
		<div id="page8" data-role="page" lang="es" data-theme="b"
		data-add-back-btn="true">
			<div data-theme="a" data-role="header">
				<h6>Cambio<br>de dia<div class="encabezado"></div></h6>
			</div>

			<div style="padding: 15px" data-role="content" data-theme="b">
				<div data-role="fieldcontain">
					<label for="cambiaDia"> Seleccione de la lista</label>
					<select
					name="cambiaDia" id="cambiaDia" data-theme="b" data-mini="true">
						<option value="1">Lunes Semana 1</option>

						<option value="8">Lunes Semana 2</option>
                        
						<option value="2">Martes Semana 1</option>
                        
                        <option value="9">Martes Semana 2</option>

						<option value="3">Miércoles Semana 1</option>
                        
                        <option value="10">Miércoles Semana 2</option>

						<option value="4">Jueves Semana 1</option>
                        
                        <option value="11">Jueves Semana 2</option>

						<option value="5">Viernes Semana 1</option>

						<option value="12">Viernes Semana 2</option>

						<option value="6">Sábado Semana 1</option>
                        
                        <option value="13">Sábado Semana 2</option>

						<option value="0">Clientes temporales</option>
					</select>
				</div>
				<div data-role="controlgroup" data-type="horizontal" data-mini="true">
					<a onClick="cambioDia();" data-role="button">Cambiar</a>
				</div>

			</div>

		</div>

		<!-- Ruta del dia -->
		<div id="page7" data-role="page" lang="es" data-theme="b"
		data-add-back-btn="true">
			<div data-role="header">

				<h6>Ruta del día<div class="encabezado"></div></h6>
				<div data-iconpos="right" data-role="navbar" data-theme="a">
					<ul>
						<li>
							<a href="#page1" data-theme="b" data-icon="home"> Menú
							<br>
							principal </a>
						</li>

						<li>
							<a href="#page8" data-theme="b" data-icon="star">Cambio
							<br>
							de dia</a>
						</li>

					</ul>
				</div>
			</div>
			<div data-role="content" style="padding: 15px">

				<div id="contienelistaclientes"></div>
			</div>

		</div>

		<!-- Ingreso de clientes -->
		<div id="page16" data-add-back-btn="true" data-role="page" lang="es"
		data-theme="b">
			<div data-role="header">
				<h6> Ingreso
				<br>
				de clientes </h6>
			</div>

			<div data-role="content" data-theme="b">

				<div data-role="fieldcontain">
					<label for="clientetmp">Nombre de cliente:</label>
					<input type="text"
					name="nombretmp" id="nombretmp" value="" />

					<label for="negociotmp">Nombre del negocio:</label>
					<input
					type="text" name="negociotmp" id="negociotmp" value="" />
					<label for="direcciontmp">Dirección</label>
					<input type="text"
					name="direcciontmp" id="direcciontmp" value="" />
					<label for="barriotmp">Barrio:</label>
					<input type="text" name="barriotmp"
					id="barriotmp" value="" />
					<label for="municipiotmp">Municipio:</label>
					<input type="text"
					name="municipiotmp" id="municipiotmp" value="" />
					<label for="departamentotmp">Departamento:</label>
					<input type="text"
					name="departamentotmp" id="departamentotmp" value="" />
					<label for="telefonotmp">Teléfono</label>
					<input type="text"
					name="telefonotmp" id="telefonotmp" value="" />

					<a onclick="pedidotmp();" data-role="button">Guardar datos</a>
				</div>

			</div>

		</div>

		<!-- Informacion del cliente -->
		<div id="page6" data-role="page" lang="es" data-theme="b"
		data-add-back-btn="true">

			<div data-theme="a" data-role="header">
				<h6> Información
				<br>
				del cliente </h6>
			</div>

			<div style="padding: 10px" data-role="content" lang="es"
			data-theme="b">
				<div id="infocliente1"></div>

				<div data-role="collapsible-set">
					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Detalles del cliente</h6>

						<div id="infocliente2"></div>
					</div>
				</div>

			</div>

			<a onClick="cargadocscliente(clienteenuso);" data-role="button"
			data-transition="none">Documentos pendientes<div id="cantDocsCliente" class="notificacion"></div></a>
             <!-- href="#page4" -->
            <a onClick="ingresarFactura();"
			data-role="button">Ingresar factura<br>
            <span id="spanLimiteCredito" class="limite_excedido">Limite de Crédito Excedido</span></a>
            <a href="#page14"
			data-role="button">Motivos no venta</a><a
			onclick="listaproductosCambios();" data-role="button">Cambios</a><a
			href="#page7" data-role="button">Ruta del día</a>

		</div>

		<!-- Motivos no venta -->
		<div id="page14" data-role="page" lang="es" data-theme="b"
		data-add-back-btn="true">

			<div data-role="header">

				<h6> Motivos
				<br>
				no venta </h6>
			</div>
			<div data-iconpos="right" data-role="navbar" data-theme="a">
				<ul>
					<li>
						<a onclick="grabaNoVenta();" data-theme="b"
						data-icon="star"> Grabar </a>
					</li>
					

				</ul>
			</div>

			<div data-role="content" data-theme="b">
				<div data-role="fieldcontain">
					<fieldset data-role="controlgroup">
						<legend></legend>
						<input type="radio" name="motivoNoventa" id="motivoNoventa_0"
						value="0" />
						<label for="motivoNoventa_0">Negocio Cerrado</label>
						<input type="radio" name="motivoNoventa" id="motivoNoventa_1"
						value="1" />
						<label for="motivoNoventa_1">Encargado No
							Está</label>
						<input type="radio" name="motivoNoventa" id="motivoNoventa_2"
						value="2" />
						<label for="motivoNoventa_2">Falta de Dinero</label>
						<input type="radio" name="motivoNoventa" id="motivoNoventa_3"
						value="3" />
						<label for="motivoNoventa_3">Suficiente
							Inventario</label>
						<input type="radio" name="motivoNoventa"
						id="motivoNoventa_4" value="4" />
						<label for="motivoNoventa_4">Compró
							a Tercero</label>
						<input type="radio" name="motivoNoventa"
						id="motivoNoventa_5" value="5" />
						<label for="motivoNoventa_5">Día
							de Visita</label>
						<input type="radio" name="motivoNoventa"
						id="motivoNoventa_6" value="6" />
						<label for="motivoNoventa_6">Falta
							de Tiempo</label>
						<input type="radio" name="motivoNoventa"
						id="motivoNoventa_7" value="7" />
						<label for="motivoNoventa_7">Límite
							de crédito excedido</label>
						<input type="radio" name="motivoNoventa"
						id="motivoNoventa_8" value="8" />
						<label for="motivoNoventa_8">Otros</label>
					</fieldset>
				</div>

			</div>
<a onclick="quitaNoVenta();" data-theme="e" data-role="button"
						data-icon="delete"> Quitar No venta </a>
		</div>

		<!-- PEDIDO Cantidades de producto -->
		<div id="page4" data-role="page" lang="es" data-theme="b"
		data-add-back-btn="false">
        
			<div data-role="header">
            		<a onclick="atras();" data-theme="b"
						data-icon="back" id="btnAtras">Atras</a>
					
				<h6> Confirmación de
				<br>
				entrega </h6>
			</div>
			<div data-iconpos="right" data-role="navbar" data-theme="a">
				<ul>                	
					<li>
						<a onclick="confirmaEntrega();" data-theme="b"
						data-icon="check"> Confirmar
						<br>
						Entrega </a>
					</li>
					<li>
						<a onclick="pagDevEnvases();" data-role="button" data-icon="arrow-r">Devolución
						<br>
						de
						envases </a>
					</li>
				</ul>
			</div>

			<div data-role="content">
				<div data-role="fieldcontain">                	      
                          <!--            
                          <div class="tabla datos_cliente" id="divCliente">
                             <table width="100%" border="0" >
                              <tr>
                                <td ><span id="spCodCliente">9911139</span></td>                                                             
                              </tr>
                              <tr>                                
                                 <td colspan="2"><span id="spNombreCliente">SOCIEDAD MONTE BLANCO Y CIA. LTDA.(ROBERTO COLLEON</span></td>
                                                             
                              </tr>   
                              <tr>
                              <td width="80%"><span id="spEstadoCod">CREDITO / MORA</span></td>
                               <td width="20%">
                               		
                               		<span id="spSaldoVencido" class="saldoVencido">C$120,000.00</span></td>
                              </tr>                          
                            </table>
                          </div>                      
                   		-->
                
					<small>
						<p id="pedidoEncabezado">
							Código:
							<br>
							Descripción:
						</p></small>

					<table width="100%" border="0" cellspacing="0">
						<tr>
							<td width="35%" align="left"><label for="pedidocajas"><small>Cajas</small></label></td>
							<td width="5%"></td>
							<td width="35%" align="left"><label for="pedidounidades"><small>Unidades</small></label></td>
							<td width="5%"></td>
							<td width="20%" align="right"></td>
						</tr>
						<tr>
							<td align="left">
							<div id="div-cajas">
								<input type="number" name="pedidocajas" id="pedidocajas" value="" />

							</div></td>
							<td></td>
							<td align="left">
							<div id="div-unidades">
								<input type="number" name="pedidounidades" id="pedidounidades" value="" />
							</div></td>
							<td></td>
							<td align="left"><a onClick="grabaLineapedido();"
							data-role="button" data-icon="check"
							data-iconpos="notext">Botón</a></td>
						</tr>
					</table>

				</div>

				<div data-role="collapsible-set">
					<div data-role="collapsible" class="listapedidocollapse">
						<h2>Detalle de pedidos:</h2>
						
                     <!--  <form>
    <fieldset data-role="controlgroup" data-type="horizontal">
        <legend>Horizontal:</legend>
        <input type="radio" name="rbtnFactura" id="rbtnFactCredito" value="on" checked="checked" data-theme="c" >
        <label for="rbtnFactCredito">Credito</label>
        <input type="radio" name="rbtnFactura" id="rbtnFactContado" value="off" data-theme="c">
        <label for="rbtnFactContado">Contado</label>        
    </fieldset>
</form>-->
                    
                        <br>
                        <h4>Pedido de producto:</h4>
						<h5 id="rfliquido">Número de referencia:<label>N/D<label></h5>
						<div id="tblpedido"></div>
						<small>
							<table width="100%">
								<tr>
									<td width="50%" align="right"><div id="detenvases"></div></td>
									<td width="50%" align="right"><div id="detpedido"></div></td>
								</tr>
								<tr>
									<td colspan="2">
                                    <div data-role="collapsible" class="listapedidocollapse tabla" data-theme="a">
                                    <h6>Facturar Productos</h6>
										<a onclick="AgregarFacturaManual(true)" data-role="button" data-mini="false"  data-theme="c" data-icon="plus" class="btn_ref_liquido">Agregar número de referencia</a>
										<br>
                                    	<a id="facturaProducto" onclick="facturaProducto();" data-role="button" data-mini="false" data-icon="check">Facturar producto</a>
                                    	<br>
                                    	<a onclick="reimprimeFactura('PROD', 'COPIA');" data-role="button" data-mini="false" data-theme="e" data-icon="alert">Imprimir copia</a>
                                    </div>
                                    </td>
								</tr>
								<tr>
									<td colspan="2">
                                    </td>
								</tr>
							</table></small>
							
							
						<h4>Pedido de envases:</h4>
						<h5 id="rfenvase">Número de referencia:<label>N/D<label></h5>
						<div id="tblpedidoenvases"></div>
						<small>
                        <table width="100%">
							<tr>
								<td width="50%" align="right"></td>
								<td width="50%" align="right"><div id="detpedidoenvases"></div></td>
							</tr>

							<tr>
								<td colspan="2">
                                 <div data-role="collapsible" class="listapedidocollapse tabla" data-theme="a">
                                 <h6>Facturar Envases</h6>
								 	<a onclick="AgregarFacturaManual(false)" data-role="button" data-mini="false"  data-theme="c" data-icon="plus" class="btn_ref_envase">Agregar número de referencia</a>
										<br>
                                	<a onclick="facturaEnvases();" data-role="button" data-mini="false" data-icon="check">Facturar envases</a>
                                	<br>
                                	<a onclick="reimprimeFactura('ENV', 'COPIA');" data-role="button" data-mini="false" data-theme="e" data-icon="alert">Imprimir copia</a>
                                </td>
							</tr>
							<tr>
								<td colspan="2">
                                </td>
							</tr>

						</table>
						</small>
					</div>
				</div>

				<div data-role="collapsible-set">
					
					<div data-role="collapsible" class="listapedidocollapse">
					<h6>Flor de Caña</h6>
					<p id="listafdcpedido"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
					<h6>Ron Plata</h6>
					<p id="listarppedido"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
					<h6>Aguardientes Envasados</h6>
					<p id="listaaepedido"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
					<h6>Vodka</h6>
					<p id="listavkpedido"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
					<h6>Otros Productos</h6>
					<p id="listaotrospedido"></p>
					</div>

					
					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Envases</h6>
						<p id="listaenvpedido"></p>
					</div>

				</div>

			</div>
		</div>

		<!-- detalle Creditos -->
		<div id="page12" data-add-back-btn="false" data-role="page" lang="es"
		data-theme="b">
			<div data-role="header" data-theme="a">
				<h6> Documentos
				<br>
				pendientes </h6>
				<div data-iconpos="right" data-role="navbar" data-theme="a">

					<ul>

						<li>
							<a onClick="abreinfoClientePagado();" data-theme="b" data-icon="star" id="btnInfoClientePagos" > Información del cliente </a>
						</li>

					</ul>

				</div>
			</div>

			<div data-role="content">

				<div data-role="fieldcontain">
					<small>
						<div id="abonoEncabezado">
							Factura no:
							<br>
							Fecha:
							<br>
							Monto original:
							<br>
							Saldo:

						</div> <strong>
						<div id="contieneTC">
							TC:
						</div></strong> </small>
				</div>

				<div data-role="fieldcontain">
					<small>
						<table width="100%">
							<tr>
								<td width="50%">
								<select name="tipoAbono" id="tipoAbono" data-mini="true">

								   	<!-- <option value="1">Efectivo C$:</option>
									<option value="2">Efectivo US$:</option>
									<option value="3">Cheque C$:</option>
									<option value="4">Cheque US$:</option>
									<option value="5">Minuta deposito C$:</option>
                                    <option value="6">Minuta deposito US$:</option>
                                    <option value="7">Tarjeta Crédito/Débito CS$:</option> -->

								</select></td>
								<td width="10%">&nbsp;</td>
								<td width="40%" align="right">
								<input type="number" data-mini="true" name="montoAbono" id="montoAbono" value="0" />
								</td>

							</tr>

							<tr>
								<td><select name="selecBanco" id="selecBanco" data-mini="true"> <!-- disabled="true" -->

								</select></td>
								<td>&nbsp;</td>
								<td align="right">
								<input type="text" data-mini="true" name="refAbono" id="refAbono" value="0"  >
								</td>
							</tr>

						</table></small>

				</div>

				<div data-role="fieldcontain">
					<a id="btnGrabapago" onClick="grabaAbono();" data-icon="arrow-r" data-iconpos="left" data-role="button" data-theme="b">Grabar Pago</a>
					

					<!--
					<table width="100%">
					<tr>
					<td width="49%">
					<label for="selectmenu2" class="select">Forma de pago:</label>
					</td>
					<td nowrap>
					<select name="selectipoPago" id="selectipoPago">
					<option value="efectivo">Efectivo</option>
					<option value="cheque">Cheque</option>
					<option value="deposito">Minuta deposito</option>
					</select>
					</td>
					</tr>
					<tr>
					<td>
					</td>
					<td nowrap>

					</td>
					</tr>
					</table>
					-->
				</div>
				<div id="tblAbonos"></div>
				<div id="totalAbono"></div>
                
                <br/>
                <a id="btnImprimirPago" onClick="imprimeAbono();" data-icon="arrow-r" data-iconpos="left" data-role="button" data-theme="e" >Imprimir Recibo</a>
                
				<div data-role="fieldcontain">
					<table width="100%">
						<tr>
							<td>
							<legend>
								Tiene devoluciones
							</legend></td>
						</tr>
						<tr>
							<td><a id="btnTienedevolucion"
							onclick="listaproductosDevoluciones();" data-role="button"
							disabled="false">Sí</a></td>
						</tr>
					</table>

					<fieldset data-role="controlgroup"></fieldset>
				</div>
				<p id="contienelistadocs"></p>

			</div>
		</div>

		<!-- Kilometraje Final -->
		<div id="page2" data-role="page" lang="es" data-theme="b"
		data-add-back-btn="true">
			<div data-role="header">

				<h6>Cierre de día</h6>
			</div>
            
			<div data-role="content" data-theme="b" data-mini="true">
				
                <div data-role="fieldcontain">
					
                    <div data-role="collapsible" class="listapedidocollapse tabla" data-theme="a">
                     <br>
                    <h6>Resumen de Día</h6>
                    	 
                         <a onClick="imprimeResumenDia();" data-role="button" data-icon="check" data-mini="true" data-theme="e">Imprimir Resumen de Ingresos</a>
                          <br>
                        <!--  <a onClick="imprimeResumenPago();" data-role="button" data-mini="true" data-theme="e">Imprimir Resumen de Pagos</a>
                          <br> -->
                    </div>
                     <br>
                    
                    <div data-role="collapsible" class="listapedidocollapse tabla" data-theme="a">
                    <h6>Cierre de Ruta</h6>
                    <br>
                    <div data-role="collapsible" class="listapedidocollapse tabla minuta" data-theme="e">
                    <h6>Impresión de Minuta de Depósito</h6>
                    
                     <a id="banco_deposito" onClick="" data-role="button" data-theme="c" ></a>
                     <br>
                     <br>
                     <a id="resumen_pago" onClick="imprimeResumenPago()" data-role="button" data-theme="c" >Imprimir Resumen de Pago</a>
                     
                     <br>
                       <!-- <a onClick="imprimeminuta('B A C');" data-role="button" data-theme="c" style="text-align:center; vertical-align:middle; class="hide" " ><img src="../img/lbac.gif" width="120" height="34"> Minuta BAC</a>-->
                        
                        
                    </div>
                    
                     <br>
                    <br>
                    <a onClick="imprimeCierredia();" data-role="button" data-icon="check" data-theme="e">Imprimir documentos de cierre</a>
                    
					<table width="100%" border="0" cellspacing="15">
						<tr>
							<td><label for="kFinal">Ingrese Kilometraje:</label></td>

						</tr>
						<tr>
							<td>
							<input type="number" name="kFinal" id="kFinal" value="" / data-mini="true">
							</td>
							<td><a onClick="findedia();" id="btnfindedia" data-role="button" data-mini="true" data-theme="e" class="ui-disabled">Guardar</a></td>
						</tr>
					</table>

					<div id="tblfindia"></div>
					<div id="tblenvasesfindia"></div>
											 
					

						    <label for="cambiaServer">Tipo de Conexión </label>

						   
						<select name="cambiaServer" id="cambiaServer" data-theme="b" data-mini="true">
							     <option value="1">Red Interna (Dentro del CEDI)</option>

							     <option value="2">INTERNET externo</option>
							   
						</select>
                        <br>
                        <br>
                        
                        <a onclick="sincronizarEnvioDatos();" data-role="button">Enviar Información</a>

						   
					</div> <!-- fin de Fin de dia -->
				</div>
			</div>
		</div>

		<!-- Sincronizacion -->
		<div id="page17" data-role="page" lang="es" data-theme="b"
		data-add-back-btn="true">
			<div data-role="header">

				<h6>Sincronización</h6>
			</div>
			<div data-role="content" data-theme="b">
				
				<a onclick="paginaLogin('recepcion');" data-role="button">Recibir Información</a>
                <br>
				<a onclick="recuperaDatos(true);" data-role="button">Recuperar
				Información</a>
			</div>

		</div>

		<!-- Proceso Cambios -->
		<div id="page18" data-role="page" lang="es" data-theme="b"
		data-add-back-btn="true">
			<div data-role="header">
				<h6>Cambios</h6>
			</div>
			<div data-iconpos="right" data-role="navbar" data-theme="a">
				<ul>
					<li>
						<a onclick="cambioProductos();" data-theme="b" data-icon="star"> Imprimir Cambio </a>
					</li>
				</ul>
			</div>

			<div data-role="content" data-theme="b" >
				<div data-role="fieldcontain">
					<small>
						<table width="100%"  border="0" cellspacing="15">
							<tr>
								<td colspan="3">
								<p id="cambioEncabezado">
									Código:
									<br>
									Descripción:
								</p></td>
							</tr>

							<tr>
								<td width="30%">Cajas</td>
								<td width="30%">Unidades</td>
								<td width="40%" align="center" nowrap>
								<select name="cambiomotivo" id="cambiomotivo" data-mini="true">
									<option value="0">Deterioro</option>
									<option value="1">Picos</option>
									<option value="2">Retiro</option>
									<option value="3">Otros</option>
								</select></td>
							</tr>
							<tr>
								<td width="30%">
								<input type="number" data-mini="true"
								name="cambiocajas" id="cambiocajas" value="" />
								</td>
								<td width="30%">
								<input type="number" data-mini="true"
								name="cambiounidades" id="cambiounidades" value="" />
								</td>
								<td width="40%" align="right"><a
								onclick="grabaLineacambio();" data-role="button"
								data-icon="check" data-iconpos="notext" data-mini="true">Botón</a></td>
							</tr>

						</table></small>
				</div>

				<div data-role="collapsible-set">
					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Detalle Cambios</h6>
						<div id="tblcambio"></div>

					</div>
				</div>
				
				<div data-role="collapsible-set">
				<div data-role="collapsible" class="listapedidocollapse">
				<h6>Flor de Caña</h6>
				<p id="listafdccambio"></p>
				</div>

				<div data-role="collapsible" class="listapedidocollapse">
				<h6>Ron Plata</h6>
				<p id="listarpcambio"></p>
				</div>

				<div data-role="collapsible" class="listapedidocollapse">
				<h6>Aguardientes Envasados</h6>
				<p id="listaaecambio"></p>
				</div>

				<div data-role="collapsible" class="listapedidocollapse">
				<h6>Vodka</h6>
				<p id="listavkcambio"></p>
				</div>

				<div data-role="collapsible" class="listapedidocollapse">
				<h6>Envases</h6>
				<p id="listaenvcambio"></p>
				</div>

				<div data-role="collapsible" class="listapedidocollapse">
				<h6>Otros Productos</h6>
				<p id="listaotroscambio"></p>
				</div>
				</div>
				
			</div>

		</div>

		<!-- Detalle de pago -->
		<div id="page10" data-role="page" lang="es"  data-add-back-btn="true">
			<div data-role="header">

				<h6>Gestión de Cobro</h6>
			</div>
			<div data-role="content" data-theme="b">

				<div data-role="controlgroup" data-type="horizontal">
					<a href="#page6" data-role="button">Guardar</a><a href="#page6"
					data-role="button" data-theme="b">Cancelar</a>
				</div>

			</div>

		</div>

		<!-- Inventario Abordo -->
		<div id="page19" data-role="page" lang="es"  data-add-back-btn="true" data-theme="b">
			<div data-role="header">
				<h6> Inventario
				<br>
				abordo </h6>
			</div>
			<div data-role="content" >

				<div id="tblInventario"></div>

				<a onclick="imprimeInventarioabordo();" data-role="button" data-mini="false">Imprime Inventario</a>
				

			</div>

		</div>

		<!-- Modulo de envases -->
		<div id="page3" data-add-back-btn="true" data-role="page" lang="es"
		data-theme="b">
			<div data-role="header">
				<h6> Modulo
				<br>
				de envases </h6>
			</div>
			<div data-iconpos="right" data-role="navbar" data-theme="a">
				<ul>
					<li>
						<a onClick="grabaDevolucionenvases();" data-theme="b"
						data-icon="star"> Grabar </a>
					</li>
				</ul>
			</div>

			<div data-role="content">

				<div data-role="fieldcontain">
					<table width="100%">
						<tr>
							<td>Envases 200ml:</td>
							<td>
							<input type="number" name="cant200" id="cant200" value="" />
							</td>
						</tr>
						<tr>
							<td><label for="textinput4">Envases 375ml:</label></td>

							<td>
							<input type="number" name="cant375" id="cant375" value="" />
							</td>
						</tr>
						<tr>
							<td>Envases 750ml:</td>
							<td>
							<input type="number" name="cant750" id="cant750" value="" />
							</td>
						</tr>
						<tr>
							<td>Envases 1000ml:</td>
							<td>
							<input type="number" name="cant1000" id="cant1000"
							value="" />
							</td>
						</tr>
						<tr>
							<td>Envases 1750ml:</td>
							<td>
							<input type="number" name="cant1750" id="cant1750"
							value="" />
							</td>
						</tr>
					</table>
					<div data-role="fieldcontain">
						<label for="famEnvases" class="select">Marca:</label>
						<select
						name="famEnvases" id="famEnvases" data-mini="true">
							<option value="0">Flor de Caña</option>
							<option value="1">Ron Plata</option>

						</select>
					</div>

				
				<div data-role="collapsible-set">
					<div data-role="collapsible" class="listapedidocollapse">
						<h3>Detalle de envases</h3>
						<p></p>
						<div id="tbldevenvases"></div>

						<p align="right" id="devEnvasesDevueltos">
							<strong> Envase devuelto:
							<br>
							</strong>
						</p>
					</div>
					</div>
				</div>
				<br>
				<br>
				 <div data-role="collapsible" class="listapedidocollapse tabla" data-theme="a">
                      <h6>Imprimir</h6>
						<a onClick="imprimeReciboenvases();" data-role="button" data-mini="true">Imprimir devolucion de envases</a>
                 </div>
			</div>
		</div>

		<!-- Proceso Devoluciones -->
		<div id="page9" data-role="page" lang="es" data-add-back-btn="true">

			<div data-role="header">
				<h6>Devoluciones</h6>
			</div>
			<div data-iconpos="right" data-role="navbar" data-theme="a">
				<ul>
					<li>
						<a href="#page12" data-theme="b" data-icon="star"> Grabar </a>
					</li>
				</ul>
			</div>

			<div data-role="content" data-theme="b">

				<div id="devolucionEncabezado">
					Factura:
					<br>
					Código:
					<br>
					Descripción:
				</div>
				<div data-role="fieldcontain">
					<table width="100%" height="60" border="0" cellspacing="10">
						<tr>
							<td width="30%"><label for="devolucioncajas">Cajas</label></td>
							<td width="30%"><label for="devolucionunidades">Unidades</label></td>
							<td width="40%" align="center" nowrap></td>
						</tr>
						<tr>
							<td width="30%">
							<input type="number" data-mini="true"
							name="devolucioncajas" id="devolucioncajas" value="" />
							</td>
							<td width="30%">
							<input type="number" data-mini="true"
							name="devolucionunidades" id="devolucionunidades" value="" />
							</td>
							<td width="40%" align="right"><a
							onClick="grabaLineadevoluciones();" data-role="button"
							data-icon="check" data-iconpos="notext" data-mini="true">Botón</a></td>
						</tr>
					</table>

				</div>

				<div data-role="collapsible-set">
					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Detalle Devoluciones</h6>
						<div id="tbldevolucion"></div>
						<a onclick="imprimeDevolucion();" data-role="button" data-icon="check" data-mini="true">Imprimir devolucion</a>
					</div>
				</div>

				<div data-role="collapsible-set">
					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Flor de Caña</h6>
						<p id="listafdcdevolucion"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Ron Plata</h6>
						<p id="listarpdevolucion"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Aguardientes Envasados</h6>
						<p id="listaaedevolucion"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Vodka</h6>
						<p id="listavkdevolucion"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Envases</h6>
						<p id="listaenvdevolucion"></p>
					</div>

					<div data-role="collapsible" class="listapedidocollapse">
						<h6>Otros Productos</h6>
						<p id="listaotrosdevolucion"></p>
					</div>
				</div>

			</div>
		</div>

			<!-- Login bajada de Datos -->
		<div id="loginPage" data-role="page" lang="es" data-theme="b"  data-add-back-btn="false">
			<div data-theme="a" data-role="header">
				<h6> Autenticación<div class="encabezado"></div></h6>
			</div>
			<div data-iconpos="right" data-role="navbar" data-theme="a">
				<ul>
					<li>
						<a href="#page1" data-theme="b" data-icon="home"> Menú principal </a>
					</li>
				</ul>
			</div>
			<div data-role="content">
				<div data-role="fieldcontain">
					<label for="usuario">Ruta Número:</label>
					<input name="txtUsuario" id="txtUsuario" value=""  />
					<label for="password">Contraseña:</label>
					<input type="password" name="txtPass" id="txtPass" value=""  />
				</div>              
                
                <div >

     <label for="cambiaServerBajar">Tipo de Conexión </label>

     <select

     name="cambiaServerBajar" id="cambiaServerBajar" data-theme="b" data-mini="true">
      <option value="1">Red Interna (Dentro del CEDI)</option>

      <option value="2">INTERNET externo</option>
     </select>

    </div>
  <br>
				<div align="center">
					<a id="btnAceptarAutenticacion" data-role="button" onClick="autenticarUsuario();">Aceptar</a>
					<a href="#page1" data-role="button">Cancelar</a>
				</div>
			</div>
		</div>
        
        <!-- Inicio del dia -->
		<div id="page100" data-role="page" lang="es" data-theme="b" data-add-back-btn="true">
			<div data-role="header">
				<h6>Configuración de Impresora</h6>
			</div>
			<div data-role="content">
			
				<div data-role="fieldcontain">
				<select name="selectImpresora" id="selectImpresora"  data-mini="true">
				</select>
				<!-- 
					<label for="inputPrinter">Impresora</label>
					<input
					 name="inputPrinter" id="inputPrinter" value="" />
				 -->
				 
				</div>
				
				<div data-role="controlgroup" data-type="horizontal">
					<a id="botonInputPrinter" onClick="guardarPrinter();" data-role="button">Guardar Impresora</a>
				</div>
				<div data-role="controlgroup" data-type="horizontal">
					<a id="botonBuscarPrinter" onClick="listarImpresoras();" data-role="button">Buscar Impresoras</a>
				</div>
				<div data-role="controlgroup" data-type="horizontal">
					<label id="impresoraConectada">No se ha definido ninguna impresora</label>
				</div>
			</div>
		</div>


	</body>
</html>

<!-- Devoluciones -->
<!--
<div id="page13" data-role="page" lang="es" data-theme="b"  data-add-back-btn="true">
<div data-role="header">
<h6>Cambios</h6>
</div>
<div data-role="content">

</div>

<a href="#page6" data-icon="arrow-r" data-iconpos="left" data-role="button" data-theme="b">Procesar</a>
<a href="#page19" data-icon="arrow-r" data-iconpos="left" data-role="button" data-theme="b">Detalle</a>
<a href="#page6" data-icon="arrow-r" data-iconpos="left" data-role="button" data-theme="b">Regresar</a>

</div> -->
<!-- Cierre del dia -->
<!--  <div id="page11" data-role="page" lang="es" data-theme="b"  data-add-back-btn="true">
<div data-role="header">

<h6>Cierre de día
</h6>
</div>
<div data-role="content">Debe de sincronizar de nuevo para iniciar un nuevo día

<table border="1" bordercolor="#0033CC" style="background-color:#FFFFFF" width="100%" cellpadding="3" cellspacing="3">
<tr>
<th width="85%">Concepto</th>
<th width="15%">Cantidad</th>
</tr>
<tr>
<td>Negocios visitados</td>
<td>X</td>
</tr>
<tr>
<td>Negocios efectivos</td>
<td>X</td>
</tr>
<tr>
<td>Valor total de ventas</td>
<td>X</td>
</tr>
<tr>
<td>No venta</td>
<td>X</td>
</tr>
<tr>
<td>Monto Devoluciones</td>
<td>X</td>
</tr>
<tr>
<td>Kilometraje recorrido</td>
<td>X</td>
</tr>
</table>
</div>

<a href="#page1" data-icon="arrow-r" data-iconpos="left" data-role="button" data-theme="b">Menú inicio</a>

</div>
-->
